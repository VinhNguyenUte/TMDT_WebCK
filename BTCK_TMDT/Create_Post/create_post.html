<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Đăng tin chi tiết - H! TMDT</title>
    <link rel="stylesheet" href="create_post.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />
    
</head>

<body>
    <header class="header">
        <div class="header-left">
            <a href="/Home_ProductDetails/Home.html" class="header-logo">
                <img src="https://bizweb.dktcdn.net/100/479/080/themes/897121/assets/logo.png?1739930514069"
                    alt="H! TMDT Logo" />
            </a>
            <div style="position: relative;">
        <button class="CategorySelected">
          <svg class="iconCategory" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
            <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
            <g id="SVGRepo_iconCarrier">
              <path d="M4 6H20M4 12H20M4 18H20" stroke="white" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round"></path>
            </g>
          </svg>
          <ul class="category-dropdown" id="categoryDropdown">
            <li class="category-item">
              <i class="fas fa-building"></i> Bất động sản <span class="arrow">></span>
              <ul class="subcategory-list">
                <li class="subcategory-item">Chung cư</li>
                <li class="subcategory-item">Nhà riêng</li>
                <li class="subcategory-item">Văn phòng</li>
                <li class="subcategory-item">Đất nền</li>
              </ul>
            </li>
            <li class="category-item">
              <i class="fas fa-motorcycle"></i> Xe cộ <span class="arrow">></span>
              <ul class="subcategory-list">
                <li class="subcategory-item">Ô tô</li>
                <li class="subcategory-item">Xe máy</li>
                <li class="subcategory-item">Xe điện</li>
                <li class="subcategory-item">Xe đạp</li>
              </ul>
            </li>
            <li class="category-item">
              <i class="fas fa-laptop"></i> Đồ điện tử <span class="arrow">></span>
              <ul class="subcategory-list">
                <li class="subcategory-item">Điện thoại</li>
                <li class="subcategory-item">Máy tính bảng</li>
                <li class="subcategory-item">Laptop</li>
                <li class="subcategory-item">Phụ kiện điện tử</li>
              </ul>
            </li>
            <li class="category-item">
              <i class="fas fa-snowflake"></i> Tủ lạnh, máy lạnh, máy giặt <span class="arrow">></span>
              <ul class="subcategory-list">
                <li class="subcategory-item">Tủ lạnh</li>
                <li class="subcategory-item">Máy lạnh</li>
                <li class="subcategory-item">Máy giặt</li>
              </ul>
            </li>
            <li class="category-item">
              <i class="fas fa-couch"></i> Đồ gia dụng, nội thất <span class="arrow">></span>
              <ul class="subcategory-list">
                <li class="subcategory-item">Giường</li>
                <li class="subcategory-item">Tủ</li>
                <li class="subcategory-item">Bàn ghế</li>
                <li class="subcategory-item">Thiết bị nhà bếp</li>
              </ul>
            </li>
            <li class="category-item">
              <i class="fas fa-tshirt"></i> Thời trang, đồ dùng cá nhân <span class="arrow">></span>
              <ul class="subcategory-list">
                <li class="subcategory-item">Quần áo</li>
                <li class="subcategory-item">Giày dép</li>
                <li class="subcategory-item">Phụ kiện</li>
                <li class="subcategory-item">Mỹ phẩm</li>
              </ul>
            </li>
            <li class="category-item">
              <i class="fas fa-paw"></i> Thú cưng <span class="arrow">></span>
              <ul class="subcategory-list">
                <li class="subcategory-item">Chó</li>
                <li class="subcategory-item">Mèo</li>
                <li class="subcategory-item">Phụ kiện thú cưng</li>
                <li class="subcategory-item">Thức ăn thú cưng</li>
              </ul>
            </li>
          </ul>

        </button>
      </div>
            <div class="search-bar">
                <input type="text" placeholder="Tìm kiếm sản phẩm" />
                <button><i class="fas fa-search"></i></button>
            </div>
        </div>
        <div class="header-right">
            <div class="header-links">
                <a href="#"> Đóng góp ý kiến </a>
                <a href="#"> Trợ giúp </a></div>
            <div class="header-icons">
                <a class="icon-wrapper"><i class="fas fa-bell"></i><span class="badge">2</span></a>
                <a href="/Saved_Product/saved_products.html" class="icon-wrapper"><i class="fa-solid fa-heart"></i></a>
                <a href="/Chat/index.html" class="icon-wrapper"><i class="fas fa-comment-dots"></i><span class="badge">3</span></a>
                <div class="icon-wrapper bag-icon-wrapper">
                    <i class="fa-solid fa-bag-shopping"></i><span class="badge">3</span>
                    <div class="bag-dropdown-menu">
                        <a href="/Order_History/don-mua-ban.html?type=buy" class="bag-dropdown-item">Đơn mua</a>
                        <a href="/Order_History/don-mua-ban.html?type=sell" class="bag-dropdown-item">Đơn bán</a>
                    </div>
                </div>
                
                <a href="/Profile/profile_edit.html" class="icon-wrapper"><i class="fas fa-user"></i></a>
            </div>
            <div class="header-buttons">
                <a href="/Day_Tin/quan-ly-tin.html" class="btn btn-outline"><i class="fas fa-user"></i> Quản lý tin</a>
                <a href="/Create_Post/index.html" class="btn btn-post-news"><i class="fas fa-pen"></i> Đăng Tin</a>
            </div>
      </div>
    </header>

    <div class="main-content-wrapper">
        <a href="index.html" class="back-link">
            <i class="fas fa-arrow-left"></i> Quay lại trang chọn danh mục
        </a>
        <div id="details-form-container" class="post-details-container" style="display: flex;">
            <div class="post-details-left">
                <label for="image-upload-input" class="upload-slot">
                    <input type="file" id="image-upload-input" accept="image/*" multiple>
                    <i class="fas fa-camera"></i>
                    <span>Đăng từ 01 - 06 hình</span>
                </label>
                <div id="image-preview-area" class="preview-area"></div>

                <label for="video-upload-input" class="upload-slot">
                    <input type="file" id="video-upload-input" accept="video/*">
                    <i class="fas fa-video"></i>
                    <span>Đăng video để bán nhanh hơn</span>
                </label>
                <div id="video-preview-area" class="preview-area"></div>

                <div class="package-section">
                    <h4>Chọn gói đăng tin</h4>
                    <div class="package-cards-container">
                        <label>
                            <div class="package-card">
                                <input type="radio" name="posting_package" value="7_days" checked>
                                <div class="package-info">
                                    <div class="package-duration">1 Tuần</div>
                                </div>
                                <div class="package-price">20,000đ</div>
                            </div>
                        </label>
                        <label>
                            <div class="package-card">
                                <input type="radio" name="posting_package" value="15_days">
                                <div class="package-info">
                                    <div class="package-duration">15 Ngày</div>
                                </div>
                                <div class="package-price">50,000đ</div>
                            </div>
                        </label>
                        <label>
                            <div class="package-card">
                                <input type="radio" name="posting_package" value="30_days">
                                <div class="package-info">
                                    <div class="package-duration">1 Tháng</div>
                                </div>
                                <div class="package-price">100,000đ</div>
                            </div>
                        </label>
                    </div>
                </div>
            </div>
            <div class="post-details-right">
                <div class="dropdown-section">
                    <label>Danh mục tin đăng</label>
                    <div id="selected-cat-display" class="selected-cat-display">Xe cộ - Xe máy</div>
                </div>

                <div class="form-section">
                    <h3>Thông tin chi tiết</h3>
                    <div class="form-group">
                        <div class="radio-group">
                            <span>Tình trạng</span>
                            <label>
                                <input type="radio" name="tinh_trang" value="used" checked id="radio-used">
                                <span>Đã sử dụng</span>
                            </label>
                            <label>
                                <input type="radio" name="tinh_trang" value="new" id="radio-new">
                                <span>Mới</span>
                            </label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="hang_xe">Hãng xe <span class="required">*</span></label>
                        <input type="text" id="hang_xe">
                    </div>
                    <div class="form-group">
                        <label for="nam_dk">Năm đăng kí <span class="required">*</span></label>
                        <input type="number" id="nam_dk">
                    </div>
                    <div class="form-group">
                        <label for="loai_xe">Loại xe <span class="required">*</span></label>
                        <input type="text" id="loai_xe">
                    </div>
                    <div class="form-group-inline">
                        <div class="form-group">
                            <label for="dung_tich">Dung tích xe <span class="required">*</span></label>
                            <input type="text" id="dung_tich">
                        </div>
                        <div class="form-group">
                            <label for="bien_so">Biển số xe <span class="required">*</span></label>
                            <input type="text" id="bien_so">
                        </div>
                    </div>
                    <div id="km-group" class="form-group">
                        <label for="so_km">Số km đã đi <span class="required">*</span></label>
                        <input type="number" id="so_km">
                    </div>
                    <div class="form-group">
                        <label for="gia_ban">Giá bán <span class="required">*</span></label>
                        <input type="number" id="gia_ban">
                    </div>
                </div>

                <div class="form-section">
                    <h3>Tiêu đề tin đăng và mô tả chi tiết</h3>
                    <div class="form-group">
                        <label for="tieu_de">Tiêu đề tin đăng <span class="required">*</span></label>
                        <input type="text" id="tieu_de">
                    </div>
                    <div class="form-group">
                        <label for="mo_ta">Mô tả chi tiết <span class="required">*</span></label>
                        <textarea id="mo_ta"
                            placeholder="-Tình trạng giấy tờ&#10;-Thời gian sử dụng xe&#10;-Chính sách bảo hành xe"></textarea>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Thông tin người bán</h3>
                    <div class="form-group">
                        <label for="tinh_tp_select">Tỉnh/Thành phố <span class="required">*</span></label>
                        <select id="tinh_tp_select">
                            <option value="">-- Chọn Tỉnh/Thành phố --</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="quan_huyen_select">Quận/Huyện <span class="required">*</span></label>
                        <select id="quan_huyen_select">
                            <option value="">-- Chọn Quận/Huyện --</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="phuong_xa_select">Phường/Xã <span class="required">*</span></label>
                        <select id="phuong_xa_select">
                            <option value="">-- Chọn Phường/Xã --</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="dia_chi_ct">Địa chỉ chi tiết (Số nhà, tên đường) <span class="required">*</span></label>
                        <input type="text" id="dia_chi_ct" placeholder="Ví dụ: 123 Nguyễn Văn Linh">
                    </div>
                </div>
                <a href="/Payment/PaymentIndex.html" class="post-button">Đăng tin</a>
            </div>
        </div>
    </div>

    <script>
        const radioUsed = document.getElementById('radio-used');
        const radioNew = document.getElementById('radio-new');
        const kmGroup = document.getElementById('km-group');
        const imageInput = document.getElementById('image-upload-input');
        const imagePreviewArea = document.getElementById('image-preview-area');
        const videoInput = document.getElementById('video-upload-input');
        const videoPreviewArea = document.getElementById('video-preview-area');

        // Address Select Elements
        const provinceSelect = document.getElementById('tinh_tp_select');
        const districtSelect = document.getElementById('quan_huyen_select');
        const wardSelect = document.getElementById('phuong_xa_select');

        // Sample Address Data
        const addressData = {
            "Hà Nội": {
                "Ba Đình": ["Phúc Xá", "Trúc Bạch", "Vĩnh Phúc", "Cống Vị", "Điện Biên"],
                "Hoàn Kiếm": ["Chương Dương", "Cửa Đông", "Cửa Nam", "Đồng Xuân", "Hàng Bạc"],
                "Tây Hồ": ["Bưởi", "Nhật Tân", "Phú Thượng", "Quảng An", "Xuân La"],
                "Hai Bà Trưng": ["Bách Khoa", "Bạch Đằng", "Cầu Dền", "Đống Mác"]
            },
            "Đà Nẵng": {
                "Hải Châu": ["Bình Hiên", "Hải Châu I", "Hải Châu II", "Hòa Cường Bắc", "Hòa Cường Nam"],
                "Sơn Trà": ["An Hải Bắc", "An Hải Đông", "An Hải Tây", "Mân Thái", "Nại Hiên Đông"],
                "Thanh Khê": ["An Khê", "Chính Gián", "Hòa Khê", "Tam Thuận", "Tân Chính"],
                "Liên Chiểu": ["Hòa Khánh Bắc", "Hòa Khánh Nam", "Hòa Minh"]
            },
            "TP. Hồ Chí Minh": {
                "Quận 1": ["Bến Nghé", "Bến Thành", "Cầu Kho", "Cầu Ông Lãnh", "Cô Giang"],
                "Quận 3": ["Phường 1", "Phường 2", "Phường 3", "Phường 4", "Phường 5"],
                "Quận Bình Thạnh": ["Phường 1", "Phường 2", "Phường 3", "Phường 5", "Phường 6"],
                "Thành phố Thủ Đức": ["An Khánh", "An Lợi Đông", "Bình Chiểu", "Bình Thọ"]
            }
        };

        function populateSelect(selectElement, items) {
            selectElement.innerHTML = `<option value="">-- Chọn --</option>`; 
            if (items) {
                items.forEach(item => {
                    const option = document.createElement('option');
                    option.value = item;
                    option.textContent = item;
                    selectElement.appendChild(option);
                });
            }
        }

        provinceSelect.addEventListener('change', function () {
            const selectedProvince = this.value;
            if (selectedProvince && addressData[selectedProvince]) {
                populateSelect(districtSelect, Object.keys(addressData[selectedProvince]));
            } else {
                populateSelect(districtSelect, []);
            }
            populateSelect(wardSelect, []); 
        });

        districtSelect.addEventListener('change', function () {
            const selectedProvince = provinceSelect.value;
            const selectedDistrict = this.value;
            if (selectedProvince && selectedDistrict && addressData[selectedProvince] && addressData[selectedProvince][selectedDistrict]) {
                populateSelect(wardSelect, addressData[selectedProvince][selectedDistrict]);
            } else {
                populateSelect(wardSelect, []); 
            }
        });


        function toggleKmInput() {
            if (radioUsed.checked) {
                kmGroup.style.display = 'block';
                kmGroup.classList.remove('hidden');
            } else {
                kmGroup.style.display = 'none';
                kmGroup.classList.add('hidden');
            }
        }

        function handleImageUpload(event) {
            const files = event.target.files;
            imagePreviewArea.innerHTML = '';
            if (files.length > 6) {
                alert("Bạn chỉ có thể đăng tối đa 6 hình ảnh.");
                imageInput.value = ""; return;
            }
            for (const file of files) {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const previewItem = document.createElement('div');
                        previewItem.classList.add('preview-item');
                        const img = document.createElement('img');
                        img.src = e.target.result;
                        const removeBtn = document.createElement('button');
                        removeBtn.classList.add('remove-btn');
                        removeBtn.innerHTML = '&times;';
                        removeBtn.onclick = () => { previewItem.remove(); };
                        previewItem.appendChild(img);
                        previewItem.appendChild(removeBtn);
                        imagePreviewArea.appendChild(previewItem);
                    };
                    reader.readAsDataURL(file);
                }
            }
        }

        function handleVideoUpload(event) {
            const file = event.target.files[0];
            videoPreviewArea.innerHTML = '';
            if (file && file.type.startsWith('video/')) {
                const videoURL = URL.createObjectURL(file);
                const previewItem = document.createElement('div');
                previewItem.classList.add('preview-item');
                const video = document.createElement('video');
                video.src = videoURL;
                video.controls = true;
                const removeBtn = document.createElement('button');
                removeBtn.classList.add('remove-btn');
                removeBtn.innerHTML = '&times;';
                removeBtn.onclick = () => { previewItem.remove(); URL.revokeObjectURL(videoURL); videoInput.value = ""; };
                previewItem.appendChild(video);
                previewItem.appendChild(removeBtn);
                videoPreviewArea.appendChild(previewItem);
            } else if (file) {
                alert("Vui lòng chỉ chọn file video."); videoInput.value = "";
            }
        }
        radioUsed.addEventListener('change', toggleKmInput);
        radioNew.addEventListener('change', toggleKmInput);
        imageInput.addEventListener('change', handleImageUpload);
        videoInput.addEventListener('change', handleVideoUpload);

        window.onload = function () {
            const catDisplay = document.getElementById('selected-cat-display');
            if (catDisplay) { catDisplay.textContent = 'Xe cộ - Xe máy'; }
            toggleKmInput();
            populateSelect(provinceSelect, Object.keys(addressData));
        };


        const toggleButton = document.querySelector('.CategorySelected');
    const dropdown = document.getElementById('categoryDropdown');
    const categoryItems = document.querySelectorAll('.category-item');

    toggleButton.addEventListener('click', function (e) {
      e.preventDefault();
      dropdown.style.display = dropdown.style.display === 'block' ? 'none' : 'block';
      document.querySelectorAll('.subcategory-list').forEach(subList => {
        subList.style.display = 'none';
      });
    });

    document.addEventListener('click', function (e) {
      if (!toggleButton.contains(e.target) && !dropdown.contains(e.target)) {
        dropdown.style.display = 'none';
        document.querySelectorAll('.subcategory-list').forEach(subList => {
          subList.style.display = 'none';
        });
      }
    });

    categoryItems.forEach(item => {
      item.addEventListener('click', function (e) {
        e.stopPropagation();
        // Ẩn tất cả subcategory-list trước khi hiển thị cái được click
        document.querySelectorAll('.subcategory-list').forEach(subList => {
          subList.style.display = 'none';
        });
        const subcategoryList = this.querySelector('.subcategory-list');
        // Di chuyển dropdown phụ xuống dưới danh mục chính
        subcategoryList.style.top = '0%';
        subcategoryList.style.left = '100%';
        subcategoryList.style.display = subcategoryList.style.display === 'block' ? 'none' : 'block';
      });
    });
    // Thêm vào cuối script hiện có
const bagIconWrapper = document.querySelector('.bag-icon-wrapper');
const bagDropdownMenu = document.querySelector('.bag-dropdown-menu');

if (bagIconWrapper && bagDropdownMenu) {
    // Toggle dropdown on bag icon click
    bagIconWrapper.addEventListener('click', function(e) {
        e.stopPropagation(); // Prevent document click from immediately closing
        bagDropdownMenu.classList.toggle('show');
    });

    // Close dropdown when clicking outside
    document.addEventListener('click', function(e) {
        if (!bagIconWrapper.contains(e.target)) {
            bagDropdownMenu.classList.remove('show');
        }
    });

    // Prevent dropdown from closing when clicking inside it
    bagDropdownMenu.addEventListener('click', function(e) {
        e.stopPropagation();
    });
}
    </script>
</body>
</html>